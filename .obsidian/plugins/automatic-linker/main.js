/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Le=Object.create;var N=Object.defineProperty;var ke=Object.getOwnPropertyDescriptor;var De=Object.getOwnPropertyNames;var Re=Object.getPrototypeOf,Ae=Object.prototype.hasOwnProperty;var _e=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Te=(t,e)=>{for(var n in e)N(t,n,{get:e[n],enumerable:!0})},x=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of De(e))!Ae.call(t,r)&&r!==n&&N(t,r,{get:()=>e[r],enumerable:!(i=ke(e,r))||i.enumerable});return t};var Ce=(t,e,n)=>(n=t!=null?Le(Re(t)):{},x(e||!t||!t.__esModule?N(n,"default",{value:t,enumerable:!0}):n,t)),ye=t=>x(N({},"__esModule",{value:!0}),t);var ve=_e((At,E)=>{var u=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},R=-1,_=1,w=0;u.Diff=function(t,e){return[t,e]};u.prototype.diff_main=function(t,e,n,i){typeof i>"u"&&(this.Diff_Timeout<=0?i=Number.MAX_VALUE:i=new Date().getTime()+this.Diff_Timeout*1e3);var r=i;if(t==null||e==null)throw new Error("Null input. (diff_main)");if(t==e)return t?[new u.Diff(w,t)]:[];typeof n>"u"&&(n=!0);var s=n,a=this.diff_commonPrefix(t,e),l=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var o=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var h=this.diff_compute_(t,e,s,r);return l&&h.unshift(new u.Diff(w,l)),o&&h.push(new u.Diff(w,o)),this.diff_cleanupMerge(h),h};u.prototype.diff_compute_=function(t,e,n,i){var r;if(!t)return[new u.Diff(_,e)];if(!e)return[new u.Diff(R,t)];var s=t.length>e.length?t:e,a=t.length>e.length?e:t,l=s.indexOf(a);if(l!=-1)return r=[new u.Diff(_,s.substring(0,l)),new u.Diff(w,a),new u.Diff(_,s.substring(l+a.length))],t.length>e.length&&(r[0][0]=r[2][0]=R),r;if(a.length==1)return[new u.Diff(R,t),new u.Diff(_,e)];var o=this.diff_halfMatch_(t,e);if(o){var h=o[0],g=o[1],c=o[2],d=o[3],f=o[4],p=this.diff_main(h,c,n,i),m=this.diff_main(g,d,n,i);return p.concat([new u.Diff(w,f)],m)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)};u.prototype.diff_lineMode_=function(t,e,n){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2;var r=i.lineArray,s=this.diff_main(t,e,!1,n);this.diff_charsToLines_(s,r),this.diff_cleanupSemantic(s),s.push(new u.Diff(w,""));for(var a=0,l=0,o=0,h="",g="";a<s.length;){switch(s[a][0]){case _:o++,g+=s[a][1];break;case R:l++,h+=s[a][1];break;case w:if(l>=1&&o>=1){s.splice(a-l-o,l+o),a=a-l-o;for(var c=this.diff_main(h,g,!1,n),d=c.length-1;d>=0;d--)s.splice(a,0,c[d]);a=a+c.length}o=0,l=0,h="",g="";break}a++}return s.pop(),s};u.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,r=e.length,s=Math.ceil((i+r)/2),a=s,l=2*s,o=new Array(l),h=new Array(l),g=0;g<l;g++)o[g]=-1,h[g]=-1;o[a+1]=0,h[a+1]=0;for(var c=i-r,d=c%2!=0,f=0,p=0,m=0,v=0,b=0;b<s&&!(new Date().getTime()>n);b++){for(var L=-b+f;L<=b-p;L+=2){var A=a+L,D;L==-b||L!=b&&o[A-1]<o[A+1]?D=o[A+1]:D=o[A-1]+1;for(var y=D-L;D<i&&y<r&&t.charAt(D)==e.charAt(y);)D++,y++;if(o[A]=D,D>i)p+=2;else if(y>r)f+=2;else if(d){var T=a+c-L;if(T>=0&&T<l&&h[T]!=-1){var C=i-h[T];if(D>=C)return this.diff_bisectSplit_(t,e,D,y,n)}}}for(var F=-b+m;F<=b-v;F+=2){var T=a+F,C;F==-b||F!=b&&h[T-1]<h[T+1]?C=h[T+1]:C=h[T-1]+1;for(var I=C-F;C<i&&I<r&&t.charAt(i-C-1)==e.charAt(r-I-1);)C++,I++;if(h[T]=C,C>i)v+=2;else if(I>r)m+=2;else if(!d){var A=a+c-F;if(A>=0&&A<l&&o[A]!=-1){var D=o[A],y=a+D-A;if(C=i-C,D>=C)return this.diff_bisectSplit_(t,e,D,y,n)}}}}return[new u.Diff(R,t),new u.Diff(_,e)]};u.prototype.diff_bisectSplit_=function(t,e,n,i,r){var s=t.substring(0,n),a=e.substring(0,i),l=t.substring(n),o=e.substring(i),h=this.diff_main(s,a,!1,r),g=this.diff_main(l,o,!1,r);return h.concat(g)};u.prototype.diff_linesToChars_=function(t,e){var n=[],i={};n[0]="";function r(o){for(var h="",g=0,c=-1,d=n.length;c<o.length-1;){c=o.indexOf(`
`,g),c==-1&&(c=o.length-1);var f=o.substring(g,c+1);(i.hasOwnProperty?i.hasOwnProperty(f):i[f]!==void 0)?h+=String.fromCharCode(i[f]):(d==s&&(f=o.substring(g),c=o.length),h+=String.fromCharCode(d),i[f]=d,n[d++]=f),g=c+1}return h}var s=4e4,a=r(t);s=65535;var l=r(e);return{chars1:a,chars2:l,lineArray:n}};u.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],s=0;s<i.length;s++)r[s]=e[i.charCodeAt(s)];t[n][1]=r.join("")}};u.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,s=0;n<r;)t.substring(s,r)==e.substring(s,r)?(n=r,s=n):i=r,r=Math.floor((i-n)/2+n);return r};u.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,s=0;n<r;)t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)?(n=r,s=n):i=r,r=Math.floor((i-n)/2+n);return r};u.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(n==0||i==0)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var s=0,a=1;;){var l=t.substring(r-a),o=e.indexOf(l);if(o==-1)return s;a+=o,(o==0||t.substring(r-a)==e.substring(0,a))&&(s=a,a++)}};u.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||i.length*2<n.length)return null;var r=this;function s(p,m,v){for(var b=p.substring(v,v+Math.floor(p.length/4)),L=-1,A="",D,y,T,C;(L=m.indexOf(b,L+1))!=-1;){var F=r.diff_commonPrefix(p.substring(v),m.substring(L)),I=r.diff_commonSuffix(p.substring(0,v),m.substring(0,L));A.length<I+F&&(A=m.substring(L-I,L)+m.substring(L,L+F),D=p.substring(0,v-I),y=p.substring(v+F),T=m.substring(0,L-I),C=m.substring(L+F))}return A.length*2>=p.length?[D,y,T,C,A]:null}var a=s(n,i,Math.ceil(n.length/4)),l=s(n,i,Math.ceil(n.length/2)),o;if(!a&&!l)return null;l?a?o=a[4].length>l[4].length?a:l:o=l:o=a;var h,g,c,d;t.length>e.length?(h=o[0],g=o[1],c=o[2],d=o[3]):(c=o[0],d=o[1],h=o[2],g=o[3]);var f=o[4];return[h,g,c,d,f]};u.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],i=0,r=null,s=0,a=0,l=0,o=0,h=0;s<t.length;)t[s][0]==w?(n[i++]=s,a=o,l=h,o=0,h=0,r=t[s][1]):(t[s][0]==_?o+=t[s][1].length:h+=t[s][1].length,r&&r.length<=Math.max(a,l)&&r.length<=Math.max(o,h)&&(t.splice(n[i-1],0,new u.Diff(R,r)),t[n[i-1]+1][0]=_,i--,i--,s=i>0?n[i-1]:-1,a=0,l=0,o=0,h=0,r=null,e=!0)),s++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),s=1;s<t.length;){if(t[s-1][0]==R&&t[s][0]==_){var g=t[s-1][1],c=t[s][1],d=this.diff_commonOverlap_(g,c),f=this.diff_commonOverlap_(c,g);d>=f?(d>=g.length/2||d>=c.length/2)&&(t.splice(s,0,new u.Diff(w,c.substring(0,d))),t[s-1][1]=g.substring(0,g.length-d),t[s+1][1]=c.substring(d),s++):(f>=g.length/2||f>=c.length/2)&&(t.splice(s,0,new u.Diff(w,g.substring(0,f))),t[s-1][0]=_,t[s-1][1]=c.substring(0,c.length-f),t[s+1][0]=R,t[s+1][1]=g.substring(f),s++),s++}s++}};u.prototype.diff_cleanupSemanticLossless=function(t){function e(f,p){if(!f||!p)return 6;var m=f.charAt(f.length-1),v=p.charAt(0),b=m.match(u.nonAlphaNumericRegex_),L=v.match(u.nonAlphaNumericRegex_),A=b&&m.match(u.whitespaceRegex_),D=L&&v.match(u.whitespaceRegex_),y=A&&m.match(u.linebreakRegex_),T=D&&v.match(u.linebreakRegex_),C=y&&f.match(u.blanklineEndRegex_),F=T&&p.match(u.blanklineStartRegex_);return C||F?5:y||T?4:b&&!A&&D?3:A||D?2:b||L?1:0}for(var n=1;n<t.length-1;){if(t[n-1][0]==w&&t[n+1][0]==w){var i=t[n-1][1],r=t[n][1],s=t[n+1][1],a=this.diff_commonSuffix(i,r);if(a){var l=r.substring(r.length-a);i=i.substring(0,i.length-a),r=l+r.substring(0,r.length-a),s=l+s}for(var o=i,h=r,g=s,c=e(i,r)+e(r,s);r.charAt(0)===s.charAt(0);){i+=r.charAt(0),r=r.substring(1)+s.charAt(0),s=s.substring(1);var d=e(i,r)+e(r,s);d>=c&&(c=d,o=i,h=r,g=s)}t[n-1][1]!=o&&(o?t[n-1][1]=o:(t.splice(n-1,1),n--),t[n][1]=h,g?t[n+1][1]=g:(t.splice(n+1,1),n--))}n++}};u.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;u.whitespaceRegex_=/\s/;u.linebreakRegex_=/[\r\n]/;u.blanklineEndRegex_=/\n\r?\n$/;u.blanklineStartRegex_=/^\r?\n\r?\n/;u.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],i=0,r=null,s=0,a=!1,l=!1,o=!1,h=!1;s<t.length;)t[s][0]==w?(t[s][1].length<this.Diff_EditCost&&(o||h)?(n[i++]=s,a=o,l=h,r=t[s][1]):(i=0,r=null),o=h=!1):(t[s][0]==R?h=!0:o=!0,r&&(a&&l&&o&&h||r.length<this.Diff_EditCost/2&&a+l+o+h==3)&&(t.splice(n[i-1],0,new u.Diff(R,r)),t[n[i-1]+1][0]=_,i--,r=null,a&&l?(o=h=!0,i=0):(i--,s=i>0?n[i-1]:-1,o=h=!1),e=!0)),s++;e&&this.diff_cleanupMerge(t)};u.prototype.diff_cleanupMerge=function(t){t.push(new u.Diff(w,""));for(var e=0,n=0,i=0,r="",s="",a;e<t.length;)switch(t[e][0]){case _:i++,s+=t[e][1],e++;break;case R:n++,r+=t[e][1],e++;break;case w:n+i>1?(n!==0&&i!==0&&(a=this.diff_commonPrefix(s,r),a!==0&&(e-n-i>0&&t[e-n-i-1][0]==w?t[e-n-i-1][1]+=s.substring(0,a):(t.splice(0,0,new u.Diff(w,s.substring(0,a))),e++),s=s.substring(a),r=r.substring(a)),a=this.diff_commonSuffix(s,r),a!==0&&(t[e][1]=s.substring(s.length-a)+t[e][1],s=s.substring(0,s.length-a),r=r.substring(0,r.length-a))),e-=n+i,t.splice(e,n+i),r.length&&(t.splice(e,0,new u.Diff(R,r)),e++),s.length&&(t.splice(e,0,new u.Diff(_,s)),e++),e++):e!==0&&t[e-1][0]==w?(t[e-1][1]+=t[e][1],t.splice(e,1)):e++,i=0,n=0,r="",s="";break}t[t.length-1][1]===""&&t.pop();var l=!1;for(e=1;e<t.length-1;)t[e-1][0]==w&&t[e+1][0]==w&&(t[e][1].substring(t[e][1].length-t[e-1][1].length)==t[e-1][1]?(t[e][1]=t[e-1][1]+t[e][1].substring(0,t[e][1].length-t[e-1][1].length),t[e+1][1]=t[e-1][1]+t[e+1][1],t.splice(e-1,1),l=!0):t[e][1].substring(0,t[e+1][1].length)==t[e+1][1]&&(t[e-1][1]+=t[e+1][1],t[e][1]=t[e][1].substring(t[e+1][1].length)+t[e+1][1],t.splice(e+1,1),l=!0)),e++;l&&this.diff_cleanupMerge(t)};u.prototype.diff_xIndex=function(t,e){var n=0,i=0,r=0,s=0,a;for(a=0;a<t.length&&(t[a][0]!==_&&(n+=t[a][1].length),t[a][0]!==R&&(i+=t[a][1].length),!(n>e));a++)r=n,s=i;return t.length!=a&&t[a][0]===R?s:s+(e-r)};u.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,s=/\n/g,a=0;a<t.length;a++){var l=t[a][0],o=t[a][1],h=o.replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(s,"&para;<br>");switch(l){case _:e[a]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case R:e[a]='<del style="background:#ffe6e6;">'+h+"</del>";break;case w:e[a]="<span>"+h+"</span>";break}}return e.join("")};u.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==_&&(e[n]=t[n][1]);return e.join("")};u.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==R&&(e[n]=t[n][1]);return e.join("")};u.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var s=t[r][0],a=t[r][1];switch(s){case _:n+=a.length;break;case R:i+=a.length;break;case w:e+=Math.max(n,i),n=0,i=0;break}}return e+=Math.max(n,i),e};u.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case _:e[n]="+"+encodeURI(t[n][1]);break;case R:e[n]="-"+t[n][1].length;break;case w:e[n]="="+t[n][1].length;break}return e.join("	").replace(/%20/g," ")};u.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,s=e.split(/\t/g),a=0;a<s.length;a++){var l=s[a].substring(1);switch(s[a].charAt(0)){case"+":try{n[i++]=new u.Diff(_,decodeURI(l))}catch{throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var o=parseInt(l,10);if(isNaN(o)||o<0)throw new Error("Invalid number in diff_fromDelta: "+l);var h=t.substring(r,r+=o);s[a].charAt(0)=="="?n[i++]=new u.Diff(w,h):n[i++]=new u.Diff(R,h);break;default:if(s[a])throw new Error("Invalid diff operation in diff_fromDelta: "+s[a])}}if(r!=t.length)throw new Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return n};u.prototype.match_main=function(t,e,n){if(t==null||e==null||n==null)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1};u.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),r=this;function s(D,y){var T=D/e.length,C=Math.abs(n-y);return r.Match_Distance?T+C/r.Match_Distance:C?1:T}var a=this.Match_Threshold,l=t.indexOf(e,n);l!=-1&&(a=Math.min(s(0,l),a),l=t.lastIndexOf(e,n+e.length),l!=-1&&(a=Math.min(s(0,l),a)));var o=1<<e.length-1;l=-1;for(var h,g,c=e.length+t.length,d,f=0;f<e.length;f++){for(h=0,g=c;h<g;)s(f,n+g)<=a?h=g:c=g,g=Math.floor((c-h)/2+h);c=g;var p=Math.max(1,n-g+1),m=Math.min(n+g,t.length)+e.length,v=Array(m+2);v[m+1]=(1<<f)-1;for(var b=m;b>=p;b--){var L=i[t.charAt(b-1)];if(f===0?v[b]=(v[b+1]<<1|1)&L:v[b]=(v[b+1]<<1|1)&L|((d[b+1]|d[b])<<1|1)|d[b+1],v[b]&o){var A=s(f,b-1);if(A<=a)if(a=A,l=b-1,l>n)p=Math.max(1,2*n-l);else break}}if(s(f+1,n)>a)break;d=v}return l};u.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e};u.prototype.patch_addContext_=function(t,e){if(e.length!=0){if(t.start2===null)throw Error("patch not initialized");for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var r=e.substring(t.start2-i,t.start2);r&&t.diffs.unshift(new u.Diff(w,r));var s=e.substring(t.start2+t.length1,t.start2+t.length1+i);s&&t.diffs.push(new u.Diff(w,s)),t.start1-=r.length,t.start2-=r.length,t.length1+=r.length+s.length,t.length2+=r.length+s.length}};u.prototype.patch_make=function(t,e,n){var i,r;if(typeof t=="string"&&typeof e=="string"&&typeof n>"u")i=t,r=this.diff_main(i,e,!0),r.length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(t&&typeof t=="object"&&typeof e>"u"&&typeof n>"u")r=t,i=this.diff_text1(r);else if(typeof t=="string"&&e&&typeof e=="object"&&typeof n>"u")i=t,r=e;else if(typeof t=="string"&&typeof e=="string"&&n&&typeof n=="object")i=t,r=n;else throw new Error("Unknown call format to patch_make.");if(r.length===0)return[];for(var s=[],a=new u.patch_obj,l=0,o=0,h=0,g=i,c=i,d=0;d<r.length;d++){var f=r[d][0],p=r[d][1];switch(!l&&f!==w&&(a.start1=o,a.start2=h),f){case _:a.diffs[l++]=r[d],a.length2+=p.length,c=c.substring(0,h)+p+c.substring(h);break;case R:a.length1+=p.length,a.diffs[l++]=r[d],c=c.substring(0,h)+c.substring(h+p.length);break;case w:p.length<=2*this.Patch_Margin&&l&&r.length!=d+1?(a.diffs[l++]=r[d],a.length1+=p.length,a.length2+=p.length):p.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(a,g),s.push(a),a=new u.patch_obj,l=0,g=c,o=h);break}f!==_&&(o+=p.length),f!==R&&(h+=p.length)}return l&&(this.patch_addContext_(a,g),s.push(a)),s};u.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=new u.patch_obj;r.diffs=[];for(var s=0;s<i.diffs.length;s++)r.diffs[s]=new u.Diff(i.diffs[s][0],i.diffs[s][1]);r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,e[n]=r}return e};u.prototype.patch_apply=function(t,e){if(t.length==0)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],s=0;s<t.length;s++){var a=t[s].start2+i,l=this.diff_text1(t[s].diffs),o,h=-1;if(l.length>this.Match_MaxBits?(o=this.match_main(e,l.substring(0,this.Match_MaxBits),a),o!=-1&&(h=this.match_main(e,l.substring(l.length-this.Match_MaxBits),a+l.length-this.Match_MaxBits),(h==-1||o>=h)&&(o=-1))):o=this.match_main(e,l,a),o==-1)r[s]=!1,i-=t[s].length2-t[s].length1;else{r[s]=!0,i=o-a;var g;if(h==-1?g=e.substring(o,o+l.length):g=e.substring(o,h+this.Match_MaxBits),l==g)e=e.substring(0,o)+this.diff_text2(t[s].diffs)+e.substring(o+l.length);else{var c=this.diff_main(l,g,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(c)/l.length>this.Patch_DeleteThreshold)r[s]=!1;else{this.diff_cleanupSemanticLossless(c);for(var d=0,f,p=0;p<t[s].diffs.length;p++){var m=t[s].diffs[p];m[0]!==w&&(f=this.diff_xIndex(c,d)),m[0]===_?e=e.substring(0,o+f)+m[1]+e.substring(o+f):m[0]===R&&(e=e.substring(0,o+f)+e.substring(o+this.diff_xIndex(c,d+m[1].length))),m[0]!==R&&(d+=m[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,r]};u.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(var i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var r=t[0],s=r.diffs;if(s.length==0||s[0][0]!=w)s.unshift(new u.Diff(w,n)),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>s[0][1].length){var a=e-s[0][1].length;s[0][1]=n.substring(s[0][1].length)+s[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}if(r=t[t.length-1],s=r.diffs,s.length==0||s[s.length-1][0]!=w)s.push(new u.Diff(w,n)),r.length1+=e,r.length2+=e;else if(e>s[s.length-1][1].length){var a=e-s[s.length-1][1].length;s[s.length-1][1]+=n.substring(0,a),r.length1+=a,r.length2+=a}return n};u.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);for(var r=i.start1,s=i.start2,a="";i.diffs.length!==0;){var l=new u.patch_obj,o=!0;for(l.start1=r-a.length,l.start2=s-a.length,a!==""&&(l.length1=l.length2=a.length,l.diffs.push(new u.Diff(w,a)));i.diffs.length!==0&&l.length1<e-this.Patch_Margin;){var h=i.diffs[0][0],g=i.diffs[0][1];h===_?(l.length2+=g.length,s+=g.length,l.diffs.push(i.diffs.shift()),o=!1):h===R&&l.diffs.length==1&&l.diffs[0][0]==w&&g.length>2*e?(l.length1+=g.length,r+=g.length,o=!1,l.diffs.push(new u.Diff(h,g)),i.diffs.shift()):(g=g.substring(0,e-l.length1-this.Patch_Margin),l.length1+=g.length,r+=g.length,h===w?(l.length2+=g.length,s+=g.length):o=!1,l.diffs.push(new u.Diff(h,g)),g==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(g.length))}a=this.diff_text2(l.diffs),a=a.substring(a.length-this.Patch_Margin);var c=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);c!==""&&(l.length1+=c.length,l.length2+=c.length,l.diffs.length!==0&&l.diffs[l.diffs.length-1][0]===w?l.diffs[l.diffs.length-1][1]+=c:l.diffs.push(new u.Diff(w,c))),o||t.splice(++n,0,l)}}};u.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")};u.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split(`
`),i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var s=n[i].match(r);if(!s)throw new Error("Invalid patch string: "+n[i]);var a=new u.patch_obj;for(e.push(a),a.start1=parseInt(s[1],10),s[2]===""?(a.start1--,a.length1=1):s[2]=="0"?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),s[4]===""?(a.start2--,a.length2=1):s[4]=="0"?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),i++;i<n.length;){var l=n[i].charAt(0);try{var o=decodeURI(n[i].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+o)}if(l=="-")a.diffs.push(new u.Diff(R,o));else if(l=="+")a.diffs.push(new u.Diff(_,o));else if(l==" ")a.diffs.push(new u.Diff(w,o));else{if(l=="@")break;if(l!=="")throw new Error('Invalid patch mode "'+l+'" in: '+o)}i++}}return e};u.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0};u.patch_obj.prototype.toString=function(){var t,e;this.length1===0?t=this.start1+",0":this.length1==1?t=this.start1+1:t=this.start1+1+","+this.length1,this.length2===0?e=this.start2+",0":this.length2==1?e=this.start2+1:e=this.start2+1+","+this.length2;for(var n=["@@ -"+t+" +"+e+` @@
`],i,r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case _:i="+";break;case R:i="-";break;case w:i=" ";break}n[r+1]=i+encodeURI(this.diffs[r][1])+`
`}return n.join("").replace(/%20/g," ")};E.exports=u;E.exports.diff_match_patch=u;E.exports.DIFF_DELETE=R;E.exports.DIFF_INSERT=_;E.exports.DIFF_EQUAL=w});var nt={};Te(nt,{default:()=>W});module.exports=ye(nt);var U=require("obsidian");var H=t=>{let e=[],n=0,i=/`([^`]+)`/g,r;for(;(r=i.exec(t))!==null;)r.index>n&&e.push({isCode:!1,content:t.substring(n,r.index)}),e.push({isCode:!0,content:r[0]}),n=r.index+r[0].length;n<t.length&&e.push({isCode:!1,content:t.substring(n)});let s=/\[\[(.*?)(?:\|(.*?))?\]\]/g;return e.map(l=>l.isCode?l.content:l.content.replace(s,(o,h,g)=>{if(g)return g;let c=h.split("/");return c[c.length-1]||h})).join("")};var ee=t=>t?.["automatic-linker-disabled"]===!0||t?.["automatic-linker-off"]===!0,G=t=>t?.["automatic-linker-restrict-namespace"]===!0||t?.["automatic-linker-limited-namespace"]===!0||t?.["automatic-linker-scoped"]===!0,j=t=>t?.["automatic-linker-prevent-linking"]===!0||t?.["automatic-linker-exclude"]===!0;var te=t=>{let n=t.split(`
`).map(s=>s.replace(/\t/g," ".repeat(4))),i=1/0;for(let s of n){if(s.trim().length===0)continue;let a=0;for(let l of s)if(l===" ")a++;else break;i=Math.min(i,a)}return i===1/0||i===0?t:n.map(s=>{if(s.trim().length===0)return"";let a=s.slice(i),l=a.match(/^ */)?.[0].length||0,o=Math.floor(l/4),h=l%4,g=a.slice(l);return"	".repeat(o)+" ".repeat(h)+g}).join(`
`)};var ne={},M=(t,e)=>{let n=e+"/";return e&&t.startsWith(n)?t.slice(n.length).split("/")[0]||"":t.split("/")[0]||""},ie=(t,e=!1)=>{let n={children:new Map};for(let i of t){let r=n,s=e?i.toLowerCase():i;for(let a of s){let l=r.children.get(a);l||(l={children:new Map},r.children.set(a,l)),r=l}r.candidate=i}return n},J=(t,e,n=!1)=>{let i=t.filter(g=>!g.exclude),r=e?`${e}/`:null,s=r?.length||0,a=i.map(g=>{let c={full:g.path,short:null,scoped:g.scoped,namespace:M(g.path,e)};return r&&g.path.startsWith(r)&&(c.short=g.path.slice(s)),c}),l=new Map;for(let{full:g,short:c,scoped:d,namespace:f}of a){l.set(g,{canonical:g,scoped:d,namespace:f});let p=g.lastIndexOf("/");if(p!==-1){let m=g.slice(p+1);(n||/^[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}]+$/u.test(m))&&(l.set(m,{canonical:g,scoped:d,namespace:f}),n&&l.set(m.toLowerCase(),{canonical:g,scoped:d,namespace:f}))}c&&l.set(c,{canonical:g,scoped:d,namespace:f})}for(let g of i)if(g.aliases){let c=null;r&&g.path.startsWith(r)&&(c=g.path.slice(s));for(let d of g.aliases){let f=c&&d===c?d:`${g.path}|${d}`;l.has(d)||l.set(d,{canonical:f,scoped:g.scoped,namespace:M(g.path,e)}),n&&!l.has(d.toLowerCase())&&l.set(d.toLowerCase(),{canonical:f,scoped:g.scoped,namespace:M(g.path,e)})}}let o=Array.from(l.keys()),h=ie(o,n);return{candidateMap:l,trie:h}};if(ne.vitest){let{it:t,expect:e,describe:n}=ne.vitest;n("getTopLevelDirectoryName",()=>{t("should return the first directory after the baseDir",()=>{e(M("pages/docs/file","pages")).toBe("docs"),e(M("pages/home/readme","pages")).toBe("home")}),t("should return the first segment if baseDir is not found",()=>{e(M("docs/file")).toBe("docs"),e(M("home/readme")).toBe("home")})}),n("buildTrie",()=>{t("should build a Trie with the given words",()=>{let r=ie(["hello","world","hi"]);e(r.children.has("h")).toBe(!0),e(r.children.has("w")).toBe(!0),e(r.children.get("h")?.children.has("e")).toBe(!0),e(r.children.get("h")?.children.get("i")?.candidate).toBe("hi")})}),n("buildCandidateTrie",()=>{t("should build a candidate map and trie",()=>{let i=[{path:"pages/docs/readme",scoped:!1,aliases:["intro"]},{path:"pages/home/index",scoped:!1,aliases:[]}],{candidateMap:r,trie:s}=J(i,"pages");e(r.has("pages/docs/readme")).toBe(!0),e(r.has("docs/readme")).toBe(!0),e(r.get("intro")?.canonical).toBe("pages/docs/readme|intro"),e(s.children.has("d")).toBe(!0),e(s.children.has("h")).toBe(!0)})})}var S={PROTECTED:/(```[\s\S]*?```|`[^`]*`|\[\[[^\]]+\]\]|\[[^\]]+\]\([^)]+\)|\[[^\]]+\]|https?:\/\/[^\s]+)/g,DATE_FORMAT:/^\d{4}-\d{2}-\d{2}$/,MONTH_NOTE:/^[0-9]{1,2}$/,CJK:/[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}]/u,CJK_CANDIDATE:/^[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}\s\d]+$/u,KOREAN:/^[\p{Script=Hangul}]+$/u,JAPANESE:/^[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\s\d]+$/u,URL:/^(https?:\/\/[^\s]+)/,PROTECTED_LINK:/^\s*(\[\[[^\]]+\]\]|\[[^\]]+\]\([^)]+\))\s*$/,KOREAN_SUFFIX:/^(이다\.?)/,KOREAN_PARTICLES:/^(는|은)/,KOREAN_PARTICLES_EXTENDED:/^(가|는|을|에|서|와|로부터|까지|보다|로|의|나|도|또한)/,TABLE_SEPARATOR:/^[|:\s-]+$/,WORD_BOUNDARY:/[\p{L}\p{N}_/-]/u,WHITESPACE:/[\t\n\r ]/},P=t=>t===void 0||S.CJK.test(t)?!0:!S.WORD_BOUNDARY.test(t)||S.WHITESPACE.test(t),le=t=>S.MONTH_NOTE.test(t)&&parseInt(t,10)>=1&&parseInt(t,10)<=12,Ue=t=>S.PROTECTED_LINK.test(t),Se=t=>S.CJK.test(t),re=t=>S.CJK_CANDIDATE.test(t),se=t=>S.KOREAN.test(t),ae=new WeakMap,oe=(t,e)=>{let n=ae.get(t);n||(n=new Map,ae.set(t,n));let i=e?"ignoreCase":"normal",r=n.get(i);if(r)return r;let s=new Map;for(let[a,l]of t.entries()){let o=a.lastIndexOf("/");if(o===-1)continue;let h=a.slice(o+1),g=e?h.toLowerCase():h,c=s.get(g);c||(c=[],s.set(g,c)),c.push([a,l])}return n.set(i,s),s},Fe=(t,e)=>e?M(t,e):t.split("/")[0]||"",V=(t,e)=>e&&t.startsWith(e+"/")?t.slice((e+"/").length):t,he=t=>{let e=t.indexOf("|"),n=e!==-1;if(n){let i=t.slice(0,e),r=t.slice(e+1);return{linkPath:i,alias:r,hasAlias:n}}return{linkPath:t,alias:"",hasAlias:n}},K=(t,e,n={})=>{if(!n.preventSelfLinking)return!1;let{linkPath:i}=he(t.canonical),r=V(i,n.baseDir),s=V(e,n.baseDir);return r===s},Ie=(t,e)=>{if(!e||e.length===0||!t.includes("/"))return!1;for(let n of e)if(t===n||t.startsWith(n+"/"))return!0;return!1},X=(t,e,n={})=>{let{linkPath:i,alias:r,hasAlias:s}=he(t.canonical),a=V(i,n.baseDir),l=Ie(a,n.removeAliasInDirs);if(s){if(l)return{linkPath:a};let o=n.ignoreCase?e:r;return{linkPath:a,alias:o}}if(a.includes("/")){if(l)return{linkPath:a};let h=a.split("/").pop()||e;if(n.ignoreCase&&e.includes("/")){let g=e.split("/").pop();g&&(h=g)}else n.ignoreCase&&(h=e);return{linkPath:a,alias:h}}return n.ignoreCase?e.toLowerCase()===a.toLowerCase()?{linkPath:e}:{linkPath:a,alias:e}:e!==a?{linkPath:a,alias:e}:{linkPath:a}},Me=({linkPath:t,alias:e,isInTable:n=!1})=>{let i=t;return e&&(i=`${t}|${e}`),n&&i.includes("|")&&(i=i.replace(/\|/g,"\\|")),`[[${i}]]`},Ee=(t,e)=>e.ignoreDateFormats&&S.DATE_FORMAT.test(t)?!0:le(t),Pe=t=>{let e=t.trim();return!e||!e.includes("|")?!1:e.startsWith("|")&&e.endsWith("|")&&S.TABLE_SEPARATOR.test(e)?!0:e.startsWith("|")&&e.endsWith("|")},ge=(t,e)=>{let n=t.lastIndexOf(`
`,e-1)+1;n===0&&t[0]!==`
`&&(n=0);let i=t.indexOf(`
`,e);i===-1&&(i=t.length);let r=t.slice(n,i);return Pe(r)},Ne=(t,e,n,i,r,s,a={})=>ce(t,e,n,oe(n,a.ignoreCase),r,i,s,a),Oe=(t,e,n,i,r,s,a)=>{let l=t[e-1];if(!P(l))return null;let o=null,h=Math.min(t.length-e,100),g="",c="";for(let L=1;L<=h;L++){let A=e+L,D=t[e+L-1];g+=D,c=a.ignoreCase?c+D.toLowerCase():g;let y=n.get(c);if(!y)continue;let T=t[A];P(T)&&(Ee(g,a)||(o={word:g,length:L,key:c,candidateList:y}))}if(!o)return null;let d=o.candidateList.filter(([,L])=>!(L.scoped&&L.namespace!==r)),f=null;if(d.length===1)f=d[0][1];else if(d.length>1){let L=$e(d,i,a);L&&(f=L[1])}if(!f)return null;if(K(f,i,a))return{result:o.word,newIndex:e+o.length};let{linkPath:p,alias:m}=X(f,o.word,a),v=ge(t,e);return{result:s({linkPath:p,sourcePath:i,alias:m,isInTable:v}),newIndex:e+o.length}},Be=(t,e,n,i,r,s,a={})=>{let l=t.slice(e+n.length),o=l.match(S.KOREAN_SUFFIX);if(o){if(K(i,r,a))return{result:n+o[0],newIndex:e+n.length+o[0].length};let{linkPath:h,alias:g}=X(i,n,a);return{result:s({linkPath:h,sourcePath:r,alias:g,isInTable:!1})+o[0],newIndex:e+n.length+o[0].length}}return l.match(S.KOREAN_PARTICLES)?{result:t[e],newIndex:e+1}:null},$e=(t,e,n={})=>{let i=null,r=-1,s=e.includes("/")?e.slice(0,e.lastIndexOf("/")):"",a=s?s.split("/"):[];for(let[l,o]of t){let h=l.lastIndexOf("/"),c=l.slice(0,h).split("/"),d=0;for(let f=0;f<Math.min(c.length,a.length)&&c[f]===a[f];f++)d++;if(d>r)r=d,i=[l,o];else if(d===r&&i!==null)if(s===""&&n.baseDir){let f=n.baseDir+"/",p=b=>b.startsWith(f)?b.slice(f.length).split("/").length-1:1/0,m=p(l),v=p(i[0]);(m<v||m===v&&l.length<i[0].length)&&(i=[l,o])}else{let p=i[0].slice(0,i[0].lastIndexOf("/")).split("/");(c.length<p.length||c.length===p.length&&l.length<i[0].length)&&(i=[l,o])}}return i},ce=(t,e,n,i,r,s,a,l={})=>{let o="",h=0;e:for(;h<t.length;){if(t[h]==="h"&&t.slice(h,h+4)==="http"){let p=t.slice(h).match(S.URL);if(p){o+=p[0],h+=p[0].length;continue}}let g=e,c=null,d=h,f="";for(;d<t.length;){let p=t[d],m=l.ignoreCase?p.toLowerCase():p;f+=p;let v=g.children.get(m);if(!v)break;g=v,g.candidate&&(re(f)||P(t[d+1]))&&(c={candidate:g.candidate,length:d-h+1}),d++}if(c){let p=f.slice(0,c.length);if(l.ignoreDateFormats&&S.DATE_FORMAT.test(p)){o+=p,h+=c.length;continue e}if(le(p)){o+=p,h+=c.length;continue}let m=c.candidate,v=n.get(m),b=t.substring(h,h+c.length);if(v){if(K(v,r,l)){o+=p,h+=p.length;continue e}if(se(p)){let I=Be(t,h,p,v,r,a,l);if(I){o+=I.result,h=I.newIndex;continue e}}if(!re(p)){let I=h>0?t[h-1]:void 0,we=h+p.length<t.length?t[h+p.length]:void 0;if(!P(I)||!P(we)){o+=t[h],h++;continue e}}if(se(p)&&(h+p.length<t.length?t.slice(h+p.length,h+p.length+10):"").match(S.KOREAN_PARTICLES_EXTENDED),l.proximityBasedLinking&&v.scoped&&v.namespace!==s){o+=p,h+=p.length;continue e}let{linkPath:y,alias:T}=X(v,b,l),C=ge(t,h),F=a({linkPath:y,sourcePath:r,alias:T,isInTable:C});o+=F,h+=p.length;continue e}}if(l.proximityBasedLinking){let p=Oe(t,h,i,r,s,a,l);if(p){o+=p.result,h=p.newIndex;continue e}}o+=t[h],h++}return o},z=({body:t,linkResolverContext:{filePath:e,trie:n,candidateMap:i},settings:r={proximityBasedLinking:!0,baseDir:void 0,ignoreDateFormats:!0},linkGenerator:s=Me})=>{if(t=t.normalize("NFC"),Ue(t))return t;let a=oe(i,r.ignoreCase),l=Fe(e,r.baseDir),o=v=>Se(v)?Ne(v,n,i,l,e,s,r):ce(v,n,i,a,e,l,s,r),h=/^>[ \t]*\[![\w-]+\].*?(\n>.*?)*(?=\n(?!>)|$)/gm,g=[],c=0,d=t.replace(h,v=>{let b=`__CALLOUT_${c}__`;return g.push({placeholder:b,content:v}),c++,b}),f="",p=0,m;for(S.PROTECTED.lastIndex=0;(m=S.PROTECTED.exec(d))!==null;){let v=m.index,b=d.slice(p,v);f+=o(b),f+=m[0],p=v+m[0].length,m[0].length===0&&S.PROTECTED.lastIndex++}f+=o(d.slice(p));for(let{placeholder:v,content:b}of g)f=f.replace(v,b);return f};var ue=({body:t,urlTitleMap:e})=>{if(e.size===0)return t;let n=t,i=Array.from(e.keys()).sort((r,s)=>s.length-r.length);for(let r of i){let s=e.get(r);if(!s)continue;let a=`[${s}](${r})`,l=0,o=[];for(;l<n.length;){let h=n.indexOf(r,l);if(h===-1){o.push(n.substring(l));break}o.push(n.substring(l,h));let g=!0,c=n.substring(h-2,h),d=n[h+r.length];if(c==="]("&&d===")"&&(g=!1),g){let f=n.substring(0,h);if((f.match(/(?<!\\)`/g)||[]).length%2!==0){let m=f.lastIndexOf("`");m!==-1&&!f.substring(m+1).includes("`")&&(g=!1)}}g?o.push(a):o.push(r),l=h+r.length}n=o.join("")}return n};var We=/<title[^>]*>([^<]+)<\/title>/i,fe=t=>{let e=t.match(We);return e&&e[1]?e[1].trim():""};var He=/https?:\/\/[^\s<>"'`)]+/g,Ge=/[.,;!?\]}]+$/,de=(t,e)=>{let n=new Set,i,r=[],s=/^(?:```|~~~)[^\r\n]*?\r?\n([\s\S]*?)\r?\n^(?:```|~~~)$/gm,a;for(;(a=s.exec(t))!==null;)r.push({start:a.index,end:a.index+a[0].length});for(s.lastIndex=0;(i=He.exec(t))!==null;){let l=i[0],o=i.index,h=!1;for(let c of r)if(o>=c.start&&o<c.end){h=!0;break}if(h)continue;let g=!0;if(o>=2){let c=o+l.length;c<t.length&&t[c]===")"&&t.substring(o-2,o)==="]("&&(g=!1)}if(g&&o>=1){let c=t[o-1],d=t[o+l.length];c==="<"&&d===">"&&(g=!1)}if(g){let c=t.substring(0,o);if((c.match(/(?<!\\)`/g)||[]).length%2!==0){let f=c.lastIndexOf("`");f!==-1&&!c.substring(f+1).includes("`")&&(g=!1)}}if(g){let c=l,d=!0;if(e&&e.length>0)try{let p=new URL(l).hostname;e.some(m=>p===m||p.endsWith(`.${m}`))&&(d=!1)}catch(f){console.warn(`Failed to parse URL for domain check: ${l}`,f),d=!1}if(d){let f=l.replace(Ge,"");f.includes("://")?c=f:(c=l,console.warn(`URL cleaning potentially broke the URL: ${l} -> ${f}`))}d&&n.add(c)}}return n};function Z(t,e){try{let n=new URL(t);if(!Ke(n,e.jiraURLs)||t.includes("?"))return t;let i=je(n);if(!i)return t;let r=Je(n,i);return Ve(n,i,r)}catch{return t}}function je(t){let e=t.pathname.split("/").filter(Boolean);if(e[0]!=="browse"||e.length!==2)return null;let n=e[1].split("-");return n.length!==2?null:{project:n[0],issueId:n[1]}}function Je(t,e){return`${t.origin}/browse/${e.project}-${e.issueId}`}function Ve(t,e,n){return`[[${t.hostname.split(".")[1]}/jira/${e.project}/${e.issueId}]] [\u{1F517}](${n})`}function Ke(t,e){return e.some(n=>{let i=n.replace(/^https?:\/\//,"").replace(/\/$/,"");return t.hostname===i})}function Q(t,e){if(!e.formatLinearURLs)return t;try{let n=t;t.startsWith("linear://")&&(n=t.replace("linear://","https://linear.app/"));let i=new URL(n);if(!Qe(i))return t;let r=Xe(i);if(!r)return t;let s=ze(r);return Ze(r,s)}catch{return t}}function Xe(t){let e=t.pathname.split("/").filter(Boolean);if(e.length<3)return null;let[n,i,r]=e;return i!=="issue"||!/^[A-Z]+-\d+$/.test(r)?null:{workspace:n,issueId:r}}function ze(t){return`https://linear.app/${t.workspace}/issue/${t.issueId}`}function Ze(t,e){return`[[linear/${t.workspace}/${t.issueId}]] [\u{1F517}](${e})`}function Qe(t){return t.hostname==="linear.app"}function pe(t,e){try{let n=new URL(t);if(!et(n,e.githubEnterpriseURLs))return t;let i=Ye(n);if(!i)return t;let r=qe(n,i);return xe(i,r)}catch{return t}}function Ye(t){let e=t.pathname.split("/").filter(Boolean);if(e.length<2)return null;let[n,i,r,s]=e,a={owner:n,repository:i};return tt(t)&&(a.type=r,a.id=s),a}function qe(t,e){if(e.type&&e.id){let n=`/${e.owner}/${e.repository}/${e.type}/${e.id}`;return`${t.origin}${n}`}return`${t.origin}/${e.owner}/${e.repository}`.replace(/\/$/,"")}function xe(t,e){let s=`[[${new URL(e).hostname!=="github.com"?"ghe":"github"}/${t.owner}/${t.repository}`;return t.type&&t.id&&(s+=`/${t.type}/${t.id}`),s+=`]] [\u{1F517}](${e})`,s}function et(t,e){return t.hostname==="github.com"?!0:e.some(n=>{let i=n.replace(/^https?:\/\//,"").replace(/\/$/,"");return t.hostname===i})}function tt(t){let e=t.pathname.toLowerCase();return e.includes("/pull/")||e.includes("/issues/")}var O=(t,e,n)=>{let i=/(?<!\[\[.*)(https?:\/\/[^\s\]]+)(?!.*\]\])/g;return t=t.replace(i,r=>n(r,e)),t};var k=require("obsidian"),B=class extends k.PluginSettingTab{plugin;constructor(e,n){super(e,n),this.plugin=n}display(){let{containerEl:e}=this;e.empty(),new k.Setting(e).setName("General").setHeading(),new k.Setting(e).setName("Format on save").setDesc("When enabled, the file will be automatically formatted (links replaced) when saving.").addToggle(n=>{n.setValue(this.plugin.settings.formatOnSave).onChange(async i=>{this.plugin.settings.formatOnSave=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("Respect 'Folder to create new notes in' setting").setDesc("When enabled, the plugin will use Obsidian's 'Folder to create new notes in' setting as the base directory for omitting folder prefixes in links.").addToggle(n=>{n.setValue(this.plugin.settings.respectNewFileFolderPath).onChange(async i=>{this.plugin.settings.respectNewFileFolderPath=i,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("Run Obsidian Linter after formatting").setDesc("When enabled, Obsidian Linter will be executed after Automatic Linker formatting. This requires the Obsidian Linter plugin to be installed.").addToggle(n=>{n.setValue(this.plugin.settings.runLinterAfterFormatting).onChange(async i=>{this.plugin.settings.runLinterAfterFormatting=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("Run Prettier after formatting").setDesc("When enabled, Prettier will be executed after Automatic Linker formatting. This requires prettier-format plugin to be installed. https://github.com/dylanarmstrong/obsidian-prettier-plugin").addToggle(n=>{n.setValue(this.plugin.settings.runPrettierAfterFormatting).onChange(async i=>{this.plugin.settings.runPrettierAfterFormatting=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("Format delay (ms)").setDesc("Delay in milliseconds before formatting. Increase this value if the linter/prettier runs before the file is fully saved.").addText(n=>{n.setPlaceholder("e.g. 100").setValue(this.plugin.settings.formatDelayMs.toString()).onChange(async i=>{let r=parseInt(i);!isNaN(r)&&r>=0&&(this.plugin.settings.formatDelayMs=r,await this.plugin.saveData(this.plugin.settings))})}),new k.Setting(e).setName("Consider aliases").setDesc("When enabled, aliases will be taken into account when processing links. Note: A restart is required for changes to take effect.").addToggle(n=>{n.setValue(this.plugin.settings.considerAliases).onChange(async i=>{this.plugin.settings.considerAliases=i,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("Proximity-based linking").setDesc("When enabled, the plugin will automatically resolve namespaces for shorthand links. If multiple candidates share the same shorthand, the candidate with the most common path segments relative to the current file will be selected.").addToggle(n=>{n.setValue(this.plugin.settings.proximityBasedLinking).onChange(async i=>{this.plugin.settings.proximityBasedLinking=i,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("Ignore date formats").setDesc("When enabled, links that match date formats (e.g. 2025-02-10) will be ignored. This helps maintain compatibility with Obsidian Tasks.").addToggle(n=>{n.setValue(this.plugin.settings.ignoreDateFormats).onChange(async i=>{this.plugin.settings.ignoreDateFormats=i,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("Ignore case").setDesc("When enabled, link matching will be case-insensitive. The original case of the text will be preserved in the link.").addToggle(n=>{n.setValue(this.plugin.settings.ignoreCase).onChange(async i=>{this.plugin.settings.ignoreCase=i,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("Prevent self-linking").setDesc("When enabled, text will not be linked to its own file. For example, the word 'VPN' inside VPN.md will not be converted to a link.").addToggle(n=>{n.setValue(this.plugin.settings.preventSelfLinking).onChange(async i=>{this.plugin.settings.preventSelfLinking=i,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("Exclude directories from automatic linking").setDesc("Directories to be excluded from automatic linking, one per line (e.g. 'Templates')").addTextArea(n=>{n.setPlaceholder(`Templates
Archive`).setValue(this.plugin.settings.excludeDirsFromAutoLinking.join(`
`)).onChange(async i=>{let r=i.split(`
`).map(s=>s.trim()).filter(Boolean);this.plugin.settings.excludeDirsFromAutoLinking=r,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("Remove aliases in directories").setDesc("Directories where link aliases should be removed, one per line (e.g. 'dir' will convert [[dir/xxx|yyy]] to [[dir/xxx]]). This affects both auto-generated aliases and frontmatter aliases.").addTextArea(n=>{n.setPlaceholder(`dir1
dir2/subdir`).setValue(this.plugin.settings.removeAliasInDirs.join(`
`)).onChange(async i=>{let r=i.split(`
`).map(s=>s.trim()).filter(Boolean);this.plugin.settings.removeAliasInDirs=r,await this.plugin.saveData(this.plugin.settings),this.plugin.refreshFileDataAndTrie()})}),new k.Setting(e).setName("URL Replacement with Title").setHeading(),new k.Setting(e).setName("Replace URL with title").setDesc("When enabled, raw URLs will be replaced with [Page Title](URL). Requires fetching the URL content.").addToggle(n=>{n.setValue(this.plugin.settings.replaceUrlWithTitle).onChange(async i=>{this.plugin.settings.replaceUrlWithTitle=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("Igonre domains").setDesc("Ignore domains for replacing URLs with titles, one per line (e.g. x.com)").addTextArea(n=>{n.setPlaceholder("").setValue(this.plugin.settings.replaceUrlWithTitleIgnoreDomains.join(`
`)).onChange(async i=>{let r=i.split(`
`).map(s=>s.trim()).filter(Boolean);this.plugin.settings.replaceUrlWithTitleIgnoreDomains=r,await this.plugin.saveData(this.plugin.settings),await this.plugin.buildUrlTitleMap()}),n.inputEl.rows=4,n.inputEl.cols=50}),new k.Setting(e).setName("URL Formatting for GitHub").setHeading(),new k.Setting(e).setName("Format GitHub URLs on save").setDesc("When enabled, GitHub URLs will be formatted when saving the file.").addToggle(n=>{n.setValue(this.plugin.settings.formatGitHubURLs).onChange(async i=>{this.plugin.settings.formatGitHubURLs=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("GitHub Enterprise URLs").setDesc("Add your GitHub Enterprise URLs, one per line (e.g. github.enterprise.com)").addTextArea(n=>{n.setPlaceholder(`github.enterprise.com
github.company.com`).setValue(this.plugin.settings.githubEnterpriseURLs.join(`
`)).onChange(async i=>{let r=i.split(`
`).map(s=>s.trim()).filter(Boolean);this.plugin.settings.githubEnterpriseURLs=r,await this.plugin.saveData(this.plugin.settings)}),n.inputEl.rows=4,n.inputEl.cols=50}),new k.Setting(e).setName("URL Formatting for Jira").setHeading(),new k.Setting(e).setName("Format JIRA URLs on save").setDesc("When enabled, JIRA URLs will be formatted when saving the file.").addToggle(n=>{n.setValue(this.plugin.settings.formatJiraURLs).onChange(async i=>{this.plugin.settings.formatJiraURLs=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("JIRA URLs").setDesc("Add your JIRA URLs, one per line (e.g. jira.enterprise.com)").addTextArea(n=>{n.setPlaceholder(`jira.enterprise.com
jira.company.com`).setValue(this.plugin.settings.jiraURLs.join(`
`)).onChange(async i=>{let r=i.split(`
`).map(s=>s.trim()).filter(Boolean);this.plugin.settings.jiraURLs=r,await this.plugin.saveData(this.plugin.settings)}),n.inputEl.rows=4,n.inputEl.cols=50}),new k.Setting(e).setName("URL Formatting for Linear").setHeading(),new k.Setting(e).setName("Format Linear URLs on save").setDesc("When enabled, Linear URLs will be formatted when saving the file.").addToggle(n=>{n.setValue(this.plugin.settings.formatLinearURLs).onChange(async i=>{this.plugin.settings.formatLinearURLs=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("Debug").setHeading(),new k.Setting(e).setName("Show load notice").setDesc("Display a notice when markdown files are loaded.").addToggle(n=>{n.setValue(this.plugin.settings.showNotice).onChange(async i=>{this.plugin.settings.showNotice=i,await this.plugin.saveData(this.plugin.settings)})}),new k.Setting(e).setName("Debug mode").setDesc("When enabled, debug information will be logged to the console.").addToggle(n=>{n.setValue(this.plugin.settings.debug).onChange(async i=>{this.plugin.settings.debug=i,await this.plugin.saveData(this.plugin.settings)})})}};var me={formatOnSave:!1,showNotice:!1,respectNewFileFolderPath:!0,considerAliases:!0,proximityBasedLinking:!0,ignoreDateFormats:!0,formatGitHubURLs:!0,githubEnterpriseURLs:[],formatJiraURLs:!0,jiraURLs:[],formatLinearURLs:!1,debug:!1,ignoreCase:!0,replaceUrlWithTitle:!0,replaceUrlWithTitleIgnoreDomains:[],excludeDirsFromAutoLinking:[],preventSelfLinking:!1,removeAliasInDirs:[],runLinterAfterFormatting:!1,runPrettierAfterFormatting:!1,formatDelayMs:1};var $=Ce(ve());function Y(t){let e=t.split(`
`);return{line:e.length-1,ch:e[e.length-1].length}}function be(t,e,n){let r=new $.default.diff_match_patch().diff_main(t,e),s="";return r.forEach(a=>{let[l,o]=a;if(l==$.default.DIFF_INSERT)n?.cm?.dispatch({changes:[{from:n.posToOffset(Y(s)),insert:o}],filter:!1}),s+=o;else if(l==$.default.DIFF_DELETE){let h=Y(s),g=s;g+=o;let c=Y(g);n?.cm?.dispatch({changes:[{from:n.posToOffset(h),to:n.posToOffset(c),insert:""}],filter:!1})}else s+=o}),r}var q=t=>new Promise(e=>setTimeout(e,t)),W=class extends U.Plugin{settings;trie=null;candidateMap=null;originalSaveCallback;urlTitleMap=new Map;frontmatterCache=new Map;constructor(e,n){super(e,n)}getEditor(){let e=this.app.workspace.getActiveViewOfType(U.MarkdownView);return e?e.editor:null}createLinkGenerator(e){return({linkPath:n,alias:i,isInTable:r})=>{let s=this.app.vault.getAbstractFileByPath(n+".md");if(s instanceof U.TFile)try{return this.app.fileManager.generateMarkdownLink(s,e,"",i||"")}catch(l){console.warn("Failed to generate link using Obsidian API:",l)}let a=n;return i&&(a=`${n}|${i}`),r&&a.includes("|")&&(a=a.replace(/\|/g,"\\|")),`[[${a}]]`}}modifyLinks(e,n){if(this.settings.formatGitHubURLs&&(e=O(e,this.settings,pe)),this.settings.formatJiraURLs&&(e=O(e,this.settings,Z)),this.settings.formatLinearURLs&&(e=O(e,this.settings,Q)),this.settings.replaceUrlWithTitle){let{contentStart:o}=(0,U.getFrontMatterInfo)(e),h=e.slice(0,o),g=e.slice(o),c=ue({body:g,urlTitleMap:this.urlTitleMap});e=h+c}if(!this.trie||!this.candidateMap)return e;this.settings.debug&&(console.log("this.trie: ",this.trie),console.log("this.candidateMap: ",this.candidateMap),console.log(new Date().toISOString(),"modifyLinks started"),new U.Notice(`Automatic Linker: ${new Date().toISOString()} modifyLinks started.`));let{contentStart:i}=(0,U.getFrontMatterInfo)(e),r=e.slice(0,i),s=this.createLinkGenerator(n),a=this.settings.respectNewFileFolderPath?this.app.vault.getConfig("newFileFolderPath"):void 0,l=z({body:e.slice(i),linkResolverContext:{filePath:n.replace(/\.md$/,""),trie:this.trie,candidateMap:this.candidateMap},settings:{proximityBasedLinking:this.settings.proximityBasedLinking,baseDir:a,ignoreDateFormats:this.settings.ignoreDateFormats,ignoreCase:this.settings.ignoreCase,preventSelfLinking:this.settings.preventSelfLinking,removeAliasInDirs:this.settings.removeAliasInDirs},linkGenerator:s});return e=r+l,this.settings.debug&&(console.log(new Date().toISOString(),"modifyLinks finished"),new U.Notice(`Automatic Linker: ${new Date().toISOString()} modifyLinks finished.`)),e}modifyLinksForActiveFile(){let e=this.app.workspace.getActiveFile();if(!e)return;let n=this.app.metadataCache.getFileCache(e)?.frontmatter;if(ee(n))return;let i=this.getEditor();if(!i)return;let r=i.getValue(),s=r,a=this.modifyLinks(r,e.path);be(s,a,i)}async modifyLinksForVault(){this.refreshFileDataAndTrie();let e=this.app.vault.getMarkdownFiles();for(let n of e)await this.app.vault.process(n,i=>this.modifyLinks(i,n.path))}async buildUrlTitleMap(){let e=this.app.workspace.getActiveFile();if(!e)return;let n=await this.app.vault.read(e),{contentStart:i}=(0,U.getFrontMatterInfo)(n),r=n.slice(i),s=de(r,this.settings.replaceUrlWithTitleIgnoreDomains);for(let a of s)if(!this.urlTitleMap.has(a))try{let l=await(0,U.request)(a),o=fe(l);o?this.urlTitleMap.set(a,o):this.settings.debug&&console.warn(`Automatic Linker: No title found for URL: ${a}`)}catch(l){this.settings.debug&&console.warn(`Automatic Linker: Failed to fetch URL title for: ${a}`,l)}}async formatThenRunPrettierAndLinter(){this.settings.replaceUrlWithTitle&&await this.buildUrlTitleMap(),this.modifyLinksForActiveFile(),this.settings.runPrettierAfterFormatting&&(await q(this.settings.formatDelayMs??100),await this.app?.commands?.executeCommandById("prettier-format:format-file")),this.settings.runLinterAfterFormatting&&(await q(this.settings.formatDelayMs??100),await this.app?.commands?.executeCommandById("obsidian-linter:lint-file"))}async mofifyLinksSelection(){let e=this.app.workspace.getActiveFile();if(!e)return;let n=this.app.workspace.activeEditor;if(!n)return;let i=n.editor;if(!i)return;let r=i.getSelection();if(!this.trie||!this.candidateMap)return;let s=this.createLinkGenerator(e.path),a=this.settings.respectNewFileFolderPath?this.app.vault.getConfig("newFileFolderPath"):void 0,l=z({body:r,linkResolverContext:{filePath:e.path.replace(/\.md$/,""),trie:this.trie,candidateMap:this.candidateMap},settings:{proximityBasedLinking:this.settings.proximityBasedLinking,baseDir:a,ignoreDateFormats:this.settings.ignoreDateFormats,ignoreCase:this.settings.ignoreCase,preventSelfLinking:this.settings.preventSelfLinking,removeAliasInDirs:this.settings.removeAliasInDirs},linkGenerator:s});i.replaceSelection(l)}refreshFileDataAndTrie(){let n=this.app.vault.getMarkdownFiles().filter(a=>{let l=a.path.replace(/\.md$/,"");return!this.settings.excludeDirsFromAutoLinking.some(o=>l.startsWith(o+"/")||l===o)}).map(a=>{let l=a.path.replace(/\.md$/,""),o=this.app.metadataCache.getFileCache(a)?.frontmatter,h=G(o),g=j(o),c=(()=>{if(this.settings.considerAliases){let d=this.app.metadataCache.getFileCache(a)?.frontmatter;return(0,U.parseFrontMatterAliases)(d)}else return null})();return{path:l,aliases:c,scoped:h,exclude:g}});n.sort((a,l)=>l.path.length-a.path.length),this.settings.debug&&console.log("Automatic Linker: allFiles for Trie building: ",n);let i=this.settings.respectNewFileFolderPath?this.app.vault.getConfig("newFileFolderPath"):void 0,{candidateMap:r,trie:s}=J(n,i,this.settings.ignoreCase??!1);this.candidateMap=r,this.trie=s,this.settings.showNotice&&new U.Notice(`Automatic Linker: Loaded all markdown files. (${n.length} files)`),this.settings.debug&&console.log(`Automatic Linker: Loaded all markdown files. (${n.length} files)`)}refreshFileDataAndTrieOnFrontmatterChange(e){let n=this.app.metadataCache.getFileCache(e)?.frontmatter,i={aliases:n?.aliases?JSON.stringify(n.aliases):void 0,scoped:G(n),exclude:j(n)},r=JSON.stringify(i),s=this.frontmatterCache.get(e.path);r!==s&&(this.frontmatterCache.set(e.path,r),this.refreshFileDataAndTrie(),this.settings.debug&&console.log(`Automatic Linker: Refreshing Trie due to frontmatter change in ${e.path}`))}async onload(){await this.loadSettings(),this.addSettingTab(new B(this.app,this)),this.app.workspace.onLayoutReady(()=>{this.refreshFileDataAndTrie(),this.registerEvent(this.app.vault.on("delete",()=>this.refreshFileDataAndTrie())),this.registerEvent(this.app.vault.on("create",()=>this.refreshFileDataAndTrie())),this.registerEvent(this.app.vault.on("rename",()=>this.refreshFileDataAndTrie())),this.registerEvent(this.app.metadataCache.on("changed",i=>this.refreshFileDataAndTrieOnFrontmatterChange(i)))}),this.addCommand({id:"format-file",name:"Format file",icon:"wand-sparkles",editorCallback:async()=>{try{await this.formatThenRunPrettierAndLinter()}catch(i){console.error(i)}}}),this.addCommand({id:"format-vault",name:"Format vault",icon:"drill",editorCallback:async()=>{try{await this.modifyLinksForVault()}catch(i){console.error(i)}}}),this.addCommand({id:"rebuild-index",name:"Rebuild index",icon:"refresh-ccw",editorCallback:async()=>{try{this.refreshFileDataAndTrie()}catch(i){console.error(i)}}}),this.addCommand({id:"format-selection",name:"Format selection",editorCallback:async()=>{try{await this.mofifyLinksSelection()}catch(i){console.error(i)}}}),this.addCommand({id:"copy-file-without-links",name:"Copy file without links",editorCallback:async()=>{let i=this.app.workspace.getActiveFile();if(!i)return;let r=await this.app.vault.read(i),{contentStart:s}=(0,U.getFrontMatterInfo)(r),a=r.slice(s),l=H(a);navigator.clipboard.writeText(l)}}),this.addCommand({id:"copy-selection-without-links",name:"Copy selection without links",editorCallback:async i=>{let r=i.getCursor("from"),s=i.getCursor("to"),a=i.getRange({line:r.line,ch:0},{line:s.line,ch:i.getLine(s.line).length});if(!a)return;let l=te(a),o=H(l);await navigator.clipboard.writeText(o)}});let e=this.app?.commands?.commands?.["editor:save-file"],n=e?.checkCallback;typeof n=="function"&&(this.originalSaveCallback=n),e.checkCallback=async i=>{if(i)return n?.(i);if(!this.settings.formatOnSave)return;await q(this.settings.formatDelayMs??100),await this.formatThenRunPrettierAndLinter()}}async onunload(){let e=this.app?.commands?.commands?.["editor:save-file"];e&&this.originalSaveCallback&&(e.checkCallback=this.originalSaveCallback)}async loadSettings(){this.settings=Object.assign({},me,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};

/* nosourcemap */